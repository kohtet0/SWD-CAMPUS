<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>Promise Learn</h1>

    <script>
      // let x = 5;

      // setTimeout(() => {
      //     x = 10
      // }, 3000);

      // console.log(x)
      //   let x = 5;

      //   const exc = (resolve, reject) => {
      //     setTimeout(() => {
      //       try {
      //         x = 10;
      //         resolve(x);
      //       } catch (rejectError) {
      //         reject(rejectError);
      //       }
      //     }, 3000);
      //   };

      //   const p = new Promise(exc);

      //   p.then((x) => {
      //     console.log("success");
      //   }).catch((error) => {
      //     console.dir(error);
      //   });

      // const f = fetch('https://fakestoreapi.comm/products')

      // f
      // .then((res) => {
      //     console.log(res)
      // })
      // .then((data) => {
      //     console.log(data)
      // })

      // f
      // .then((res) => {
      //     console.log(res)
      // })
      // .catch((error) => {
      //     console.dir(error)
      // })

      let data = null;

      const exc = (resolve) => {
        const xhr = new XMLHttpRequest();
        xhr.open("Get", "./test.txt");
        xhr.addEventListener("readystatechange", () => {
          if (xhr.readyState === 4 && xhr.status === 200) {
            data = xhr.responseText;
            resolve(data);
          }
        });

        xhr.send()
      };

      const p = new Promise(exc)
      p.then((res) => {
        console.log(res)
      })

      console.log(data)
    </script>
  </body>
</html>
